# -*- coding: utf-8 -*-
"""Untitled4.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1IwTb3XkL8ynyrWiTw3hN5xadi0xq7F1A

[source](https://www.w3schools.com/python/python_mysql_getstarted.asp)
"""

import mysql.connector

mydb = mysql.connector.connect(
    host="localhost",
    user="root",
    password="MYSQL1378"  
)

mycursor = mydb.cursor()
mycursor.execute("SHOW DATABASES")

#databases = [x[0] for x in mycursor] ??
if "SADProject" not in databases:
    mycursor.execute("CREATE DATABASE SADProject")
    mydb = mysql.connector.connect(
        host="localhost",
        user="root",
        password="MYSQL1378",
        database="SADProject"
        )
    mycursor.execute("CREATE TABLE costumer (costumerID VARCHAR(255) PRIMARY KEY, email VARCHAR(255) NOT NULL)")
    mycursor.execute("CREATE TABLE product_order (productID VARCHAR(255) PRIMARY KEY, unit_price INTEGER NOT NULL, productID VARCHAR(255) NOT NULL)")
    mycursor.execute("CREATE TABLE costumer_order (costumer_orderID VARCHAR(255) PRIMARY KEY, costumerID VARCHAR(255) NOT NULL, product_orderID VARCHAR(255) NOT NULL, FOREIGN KEY (costumerID) REFERENCES costumer (costumerID), FOREIGN KEY (product_orderID) REFERENCES product_order (product_orderID))")

else:
    mydb = mysql.connector.connect(
        host="localhost",
        user="root",
        password="MYSQL1378",
        database="SADProject"
        )

#insertion customer:

sql = "INSERT INTO customer (costumerID, email) VALUES (%s, %s)"
val = parameters.values()
mycursor.execute(sql, val)

mydb.commit()

#insertion product_order:

sql = "INSERT INTO product_order (productID, unit_price, productID) VALUES (%s, %s, %s)"
val = parameters.values()
mycursor.execute(sql, val)

mydb.commit()

#insertion costumer_order:

sql = "INSERT INTO costumer_order (costumer_orderID, costumerID, product_orderID) VALUES (%s, %s, %s)"
val = parameters.values()
mycursor.execute(sql, val)

mydb.commit()